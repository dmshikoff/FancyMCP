using System.ComponentModel;
using System.Text.Json;
using FancyMCP.Service.Services;
using ModelContextProtocol.Server;

namespace FancyMCP.Service.Tools;

[McpServerToolType]
public class TestTools
{
    [McpServerTool, Description("A simple test tool that returns hello world")]
    public static async Task<string> SayHello(TestService test)
    {
        Console.Error.WriteLine("=== SayHello tool called ===");
        var hello = await test.SayHello();
        Console.Error.WriteLine($"=== Result: {hello} ===");
        var result = JsonSerializer.Serialize(hello);
        Console.Error.WriteLine($"=== Serialized: {result} ===");
        return result;
    }
}
