using System.ComponentModel;
using System.Text.Json;
using FancyMCP.Service.Services;
using ModelContextProtocol.Server;

namespace FancyMCP.Service.Tools;

[McpServerToolType]
public class MtgTools
{
    [McpServerTool, Description("Search for Magic: The Gathering cards by description")]
    public static async Task<string> SearchMtgCards(IMtgAiService mtgAiService, string query)
    {
        var cards = await mtgAiService.UseDeckAiService(query);
        return cards != null && cards.Count > 0 
            ? JsonSerializer.Serialize(cards, new JsonSerializerOptions { WriteIndented = true }) 
            : "No cards found";
    }
}
