# FancyMCP Console Client

A console application that connects to the FancyMCP.Service MCP server to search for Magic: The Gathering cards using AI-powered natural language responses.

## Overview

This console app demonstrates how to use the [Model Context Protocol (MCP) C# SDK](https://github.com/modelcontextprotocol/csharp-sdk) to create a client that connects to an MCP server. It uses the official `McpClient` API to communicate with the FancyMCP.Service server via stdio transport.

**The magic happens on the server side**: When you search for cards, the MCP server uses Azure OpenAI to generate natural, conversational responses about the cards it finds - no JSON parsing needed!

## Setup

1. **Build the Projects**
   
   Make sure both FancyMCP.Service and FancyMCP.Console projects are built:
   ```bash
   dotnet build
   ```

   The console app will automatically use the shared `appsettings.json` from the solution root for Azure OpenAI configuration (this is used by the MCP server).

## Usage

1. **Run the Console App**
   
   ```bash
   dotnet run --project FancyMCP.Console
   ```

   The app will automatically:
   - Start the FancyMCP.Service MCP server as a child process
   - Connect to it using stdio transport
   - List available tools from the server

2. **Enter Your Queries**
   
   Once connected, you can enter natural language queries to search for Magic: The Gathering cards:

   ```
   > Find me some blue control cards
   > Show me powerful red creatures
   > Get cards with flying ability
   > What are some good cards for a mill deck?
   ```

3. **Exit**
   
   Type `quit` to exit the application.

## Example Session

```
=== FancyMCP Console Client ===

Connecting to MCP server...
Connected successfully!

Available tools:
  - search_mtg_cards: Search for Magic: The Gathering cards by description and provide a natural language summary

Enter your messages (or 'quit' to exit):
Example: 'Find me some blue control cards'

> Find me some blue control cards

Searching...

Great! I found some excellent blue control cards for you. Here are the highlights:

**Counterspell** is a classic control staple - for just UU, you can counter any spell. It's simple, 
efficient, and has been a cornerstone of blue control decks for decades.

**Force of Will** is one of the most powerful free counterspells ever printed. While it costs 3UU, 
you can alternatively pay 1 life and exile a blue card from your hand to cast it for free. This 
makes it invaluable for protecting your combo or stopping game-ending threats when you're tapped out.

**Mana Drain** is an upgraded Counterspell that not only counters the spell but also gives you mana 
equal to its mana value at the start of your next main phase. It's a mythic rare for good reason!

These cards would form a solid foundation for any blue control strategy. Would you like to know more 
about any specific card or search for different types of control cards?

> quit

Shutting down...
```

## Features

? **AI-Generated Natural Language** - Responses are generated by Azure OpenAI, providing conversational, context-aware descriptions

? **No Manual Formatting** - The console app is simple and clean - all the intelligence is in the MCP server

? **Conversational Tone** - The AI provides friendly, helpful explanations rather than raw data

? **Smart Summaries** - Azure OpenAI highlights the most relevant cards and explains why they're good

? **Context-Aware** - The AI understands your query and tailors the response accordingly

## How It Works

### Client Side (FancyMCP.Console)
1. **Creates a StdioClientTransport** - Spawns the FancyMCP.Service process and connects via stdin/stdout
2. **Creates an McpClient** - Uses `McpClient.CreateAsync()` to instantiate and connect to the server
3. **Calls Tools** - Uses `CallToolAsync()` to invoke the `search_mtg_cards` tool with user queries
4. **Displays Results** - Simply outputs the text response (no parsing needed!)

### Server Side (FancyMCP.Service)
1. **Receives the query** through MCP protocol
2. **Searches for cards** using the `DeckAiService` 
3. **Asks Azure OpenAI to summarize** the cards in natural language
4. **Returns the AI-generated response** back to the client

This architecture demonstrates the power of MCP: **the client is simple and focused on I/O, while the server handles all the complex logic and AI interactions**.

## Why This Approach is Better

? **Separation of Concerns** - Client handles UI, server handles business logic and AI
? **Reusable Server** - Any MCP client can connect and get intelligent responses
? **No Client-Side AI** - Client doesn't need Azure OpenAI dependencies or API keys
? **Consistent Experience** - All clients get the same high-quality AI responses
? **Easy to Extend** - Add more AI capabilities to the server without touching clients

This demonstrates the proper way to implement an MCP client using the official C# SDK, following the patterns documented at [https://github.com/modelcontextprotocol/csharp-sdk](https://github.com/modelcontextprotocol/csharp-sdk).
